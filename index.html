<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Luis Imóveis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
    </style>
</head>
<body class="font-sans">
    <div class="min-h-screen p-4 lg:p-8">
        <div class="fixed left-0 top-0 h-full w-64 bg-white shadow-xl p-6 hidden lg:block">
            <div class="mb-8">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold">L</div>
                    <div>
                        <h2 class="font-bold text-lg">Luis Imóveis</h2>
                        <p class="text-xs text-gray-500">Gestão de Leads</p>
                    </div>
                </div>
            </div>
            <nav class="space-y-2">
                <a href="#" class="flex items-center gap-3 px-4 py-3 bg-emerald-50 text-emerald-600 rounded-lg font-medium">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                    Dashboard
                </a>
            </nav>
            <div class="absolute bottom-6 left-6 right-6">
                <div class="flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-lg">
                    <div class="w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center text-white text-sm font-bold">A</div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-gray-900 truncate">Axxia Tech</p>
                        <p class="text-xs text-gray-500 truncate">axxiatech@gmail.com</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="lg:ml-64 space-y-8">
            <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4">
                <div>
                    <h1 class="text-3xl font-bold text-gradient">Dashboard Luis Imóveis</h1>
                    <p class="text-gray-600 mt-1">Gestão de Leads e Performance • <span id="currentDate"></span></p>
                </div>
                <div class="flex gap-3">
                    <button onclick="filterData('today')" id="btn-today" class="px-4 py-2 rounded-lg font-medium transition-all bg-emerald-500 text-white">Hoje</button>
                    <button onclick="filterData('week')" id="btn-week" class="px-4 py-2 rounded-lg font-medium transition-all border border-gray-300 text-gray-700 hover:bg-gray-50">Esta Semana</button>
                    <button onclick="filterData('30days')" id="btn-30days" class="px-4 py-2 rounded-lg font-medium transition-all border border-gray-300 text-gray-700 hover:bg-gray-50">Últimos 30 dias</button>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="glass-card rounded-xl shadow-lg p-6 relative overflow-hidden group hover:shadow-xl transition-all duration-300">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-100 to-blue-200 opacity-30 rounded-full transform translate-x-8 -translate-y-8"></div>
                    <div class="relative">
                        <div class="flex items-center justify-between mb-2">
                            <p class="text-sm font-medium text-gray-600">Total de Leads</p>
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                        </div>
                        <div class="text-3xl font-bold text-blue-600" id="total-leads">0</div>
                        <p class="text-xs text-gray-500 mt-1">Novos contatos</p>
                    </div>
                </div>
                <div class="glass-card rounded-xl shadow-lg p-6 relative overflow-hidden group hover:shadow-xl transition-all duration-300">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-emerald-100 to-emerald-200 opacity-30 rounded-full transform translate-x-8 -translate-y-8"></div>
                    <div class="relative">
                        <div class="flex items-center justify-between mb-2">
                            <p class="text-sm font-medium text-gray-600">No BITRIX</p>
                            <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        </div>
                        <div class="text-3xl font-bold text-emerald-600" id="bitrix-count">0</div>
                        <p class="text-xs text-gray-500 mt-1"><span id="bitrix-percent">0</span>% dos leads</p>
                    </div>
                </div>
                <div class="glass-card rounded-xl shadow-lg p-6 relative overflow-hidden group hover:shadow-xl transition-all duration-300">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-100 to-purple-200 opacity-30 rounded-full transform translate-x-8 -translate-y-8"></div>
                    <div class="relative">
                        <div class="flex items-center justify-between mb-2">
                            <p class="text-sm font-medium text-gray-600">Visitas Agendadas</p>
                            <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                        </div>
                        <div class="text-3xl font-bold text-purple-600" id="visits-count">0</div>
                        <p class="text-xs text-gray-500 mt-1"><span id="visits-percent">0</span>% conversão</p>
                    </div>
                </div>
                <div class="glass-card rounded-xl shadow-lg p-6 relative overflow-hidden group hover:shadow-xl transition-all duration-300">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-amber-100 to-amber-200 opacity-30 rounded-full transform translate-x-8 -translate-y-8"></div>
                    <div class="relative">
                        <div class="flex items-center justify-between mb-2">
                            <p class="text-sm font-medium text-gray-600">Valor Médio</p>
                            <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        </div>
                        <div class="text-3xl font-bold text-amber-600" id="avg-value">R$ 0</div>
                        <p class="text-xs text-gray-500 mt-1">Preço médio imóveis</p>
                    </div>
                </div>
            </div>
            <div class="grid lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <div class="glass-card rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">Leads por Horário</h3>
                        <canvas id="hourlyChart" height="80"></canvas>
                    </div>
                    <div class="glass-card rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">Valor Médio dos Imóveis por Dia</h3>
                        <canvas id="valueChart" height="80"></canvas>
                    </div>
                </div>
                <div class="space-y-6">
                    <div class="glass-card rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">Origem dos Leads</h3>
                        <canvas id="originChart"></canvas>
                    </div>
                    <div class="glass-card rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">Tipo de Negócio</h3>
                        <div id="businessTypeList" class="space-y-3"></div>
                    </div>
                </div>
            </div>
            <div class="grid lg:grid-cols-2 gap-6">
                <div class="glass-card rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Leads Recentes</h3>
                    <div id="recentLeadsList" class="space-y-3"></div>
                </div>
                <div class="glass-card rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Top Performers</h3>
                    <div id="topPerformersList" class="space-y-3"></div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const rawData = {"timestamp":"2025-10-28T02:00:25.283Z","lastUpdate":"27/10/2025, 23:00:25","totalRecords":896,"totalLeads":896,"bitrixRegistered":224,"visitsScheduled":224,"totalPropertyValue":1478400000,"avgPropertyValue":1650000,"byAgent":{"PRAIA":{"nome":"PRAIA","leads":896,"bitrix":224,"visitas":224,"valorTotal":1478400000}},"byDate":{"2025-09-27":224},"byHour":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0],"byDayOfWeek":{"Domingo":0,"Segunda":0,"Terça":0,"Quarta":0,"Quinta":0,"Sexta":0,"Sábado":224},"byOrigin":{"Whatsapp":896},"byBusinessType":{"Venda":448},"byNeighborhood":{"Charitas - Niterói - RJ - Brasil":448},"byPropertyType":{"Apartamento":448},"recentLeads":[{"nome":"Guilherme","telefone":5513992017902,"agente":"PRAIA","origem":"Whatsapp","dataHora":"2025-09-27 19:40:55","imovel":"CO0288","valor":"R$ 3.300.000","bairro":"Charitas - Niterói - RJ - Brasil","tipoNegocio":"Venda","bitrix":false,"visitaAgendada":false},{"nome":"Guilherme","telefone":5513992017902,"agente":"PRAIA","origem":"Whatsapp","dataHora":"27/09/2025, 20:05:29","imovel":"CO0288","valor":"R$ 3.300.000","bairro":"Charitas - Niterói - RJ - Brasil","tipoNegocio":"Venda","bitrix":false,"visitaAgendada":false},{"nome":"GUILHERME","telefone":5513992017902,"agente":"PRAIA","origem":"Whatsapp","dataHora":"28/09/2025, 12:03:50","imovel":"","valor":"","bairro":"","tipoNegocio":"","bitrix":true,"visitaAgendada":false},{"nome":"Guilherme TESTE","telefone":5513992017902,"agente":"PRAIA","origem":"Whatsapp","dataHora":"28/09/2025, 13:41:03","imovel":"","valor":"","bairro":"","tipoNegocio":"","bitrix":false,"visitaAgendada":true},{"nome":"Guilherme","telefone":5513992017902,"agente":"PRAIA","origem":"Whatsapp","dataHora":"2025-09-27 19:40:55","imovel":"CO0288","valor":"R$ 3.300.000","bairro":"Charitas - Niterói - RJ - Brasil","tipoNegocio":"Venda","bitrix":false,"visitaAgendada":false}],"topPerformers":[{"nome":"PRAIA","leads":896,"bitrix":224,"visitas":224,"valorTotal":1478400000,"conversionRate":"25.0"}],"conversionRate":{"bitrix":"25.0","visits":"25.0"},"byDateArray":[{"date":"2025-09-27","count":224,"dateFormatted":"27/09/2025"}]};
        let filteredData = {...rawData};
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('pt-BR');
        function filterData(period){['today','week','30days'].forEach(p=>{const btn=document.getElementById(`btn-${p}`);btn.className=p===period?'px-4 py-2 rounded-lg font-medium transition-all bg-emerald-500 text-white':'px-4 py-2 rounded-lg font-medium transition-all border border-gray-300 text-gray-700 hover:bg-gray-50'});const now=new Date();let startDate;switch(period){case 'today':startDate=new Date(now.getFullYear(),now.getMonth(),now.getDate());break;case 'week':startDate=new Date(now);startDate.setDate(now.getDate()-now.getDay());startDate.setHours(0,0,0,0);break;case '30days':startDate=new Date(now);startDate.setDate(now.getDate()-30);startDate.setHours(0,0,0,0);break}filteredData.recentLeads=rawData.recentLeads.filter(lead=>{const[datePart]=lead.dataHora.split(' ');const[day,month,year]=datePart.split('/');return new Date(`${year}-${month}-${day}`)>=startDate});filteredData.totalLeads=filteredData.recentLeads.length;filteredData.bitrixRegistered=filteredData.recentLeads.filter(l=>l.bitrix).length;filteredData.visitsScheduled=filteredData.recentLeads.filter(l=>l.visitaAgendada).length;const totalValue=filteredData.recentLeads.reduce((sum,lead)=>{const value=parseFloat(lead.valor.toString().replace('R$','').replace(/\./g,'').replace(',','.').trim())||0;return sum+value},0);filteredData.avgPropertyValue=filteredData.totalLeads>0?totalValue/filteredData.totalLeads:0;filteredData.byHour=Array(24).fill(0);filteredData.recentLeads.forEach(lead=>{const[,timePart]=lead.dataHora.split(' ');if(timePart){const hour=parseInt(timePart.split(':')[0]);filteredData.byHour[hour]++}});filteredData.byOrigin={};filteredData.recentLeads.forEach(lead=>{filteredData.byOrigin[lead.origem]=(filteredData.byOrigin[lead.origem]||0)+1});filteredData.byBusinessType={};filteredData.recentLeads.forEach(lead=>{if(lead.tipoNegocio){filteredData.byBusinessType[lead.tipoNegocio]=(filteredData.byBusinessType[lead.tipoNegocio]||0)+1}});updateDashboard()}
        function updateDashboard(){document.getElementById('total-leads').textContent=filteredData.totalLeads;document.getElementById('bitrix-count').textContent=filteredData.bitrixRegistered;document.getElementById('bitrix-percent').textContent=filteredData.totalLeads>0?Math.round((filteredData.bitrixRegistered/filteredData.totalLeads)*100):0;document.getElementById('visits-count').textContent=filteredData.visitsScheduled;document.getElementById('visits-percent').textContent=filteredData.totalLeads>0?Math.round((filteredData.visitsScheduled/filteredData.totalLeads)*100):0;document.getElementById('avg-value').textContent='R$ '+filteredData.avgPropertyValue.toLocaleString('pt-BR',{minimumFractionDigits:0,maximumFractionDigits:0});const ctx1=document.getElementById('hourlyChart').getContext('2d');new Chart(ctx1,{type:'bar',data:{labels:Array.from({length:24},(_,i)=>`${i}h`),datasets:[{label:'Leads',data:filteredData.byHour,backgroundColor:'rgba(59,130,246,0.8)',borderRadius:4}]},options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true,ticks:{stepSize:1}}}}});const ctx2=document.getElementById('originChart').getContext('2d');new Chart(ctx2,{type:'doughnut',data:{labels:Object.keys(filteredData.byOrigin),datasets:[{data:Object.values(filteredData.byOrigin),backgroundColor:['rgba(59,130,246,0.8)','rgba(16,185,129,0.8)','rgba(139,92,246,0.8)','rgba(251,191,36,0.8)','rgba(239,68,68,0.8)'],borderWidth:2,borderColor:'#fff'}]},options:{responsive:true,plugins:{legend:{position:'bottom'}}}});document.getElementById('businessTypeList').innerHTML=Object.entries(filteredData.byBusinessType).map(([type,count])=>{const percent=filteredData.totalLeads>0?(count/filteredData.totalLeads)*100:0;return`<div class="flex justify-between items-center"><span class="text-sm font-medium">${type}</span><div class="flex items-center gap-2"><span class="px-2 py-1 text-xs font-semibold bg-gray-100 text-gray-700 rounded">${count}</span><div class="w-16 bg-gray-200 rounded-full h-2"><div class="bg-emerald-500 h-2 rounded-full" style="width:${percent}%"></div></div></div></div>`}).join('')||'<p class="text-sm text-gray-500 text-center py-4">Nenhum dado disponível</p>';document.getElementById('recentLeadsList').innerHTML=filteredData.recentLeads.slice(0,5).map(lead=>{const badges=[];if(lead.bitrix)badges.push('<span class="px-2 py-1 text-xs font-semibold bg-emerald-100 text-emerald-700 rounded">BITRIX</span>');if(lead.visitaAgendada)badges.push('<span class="px-2 py-1 text-xs font-semibold bg-purple-100 text-purple-700 rounded">Visita Agendada</span>');return`<div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"><div class="flex justify-between items-start mb-2"><div><p class="font-semibold text-gray-900">${lead.nome}</p><p class="text-xs text-gray-500">${lead.telefone}</p></div><span class="px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-700 rounded">${lead.origem}</span></div><div class="text-xs text-gray-600 mb-2"><p>Agente: ${lead.agente}</p>${lead.imovel?`<p>Imóvel: ${lead.imovel}</p>`:''}</div>${badges.length>0?`<div class="flex gap-2 flex-wrap">${badges.join('')}</div>`:''}</div>`}).join('')||'<p class="text-sm text-gray-500 text-center py-8">Nenhum lead encontrado</p>';document.getElementById('topPerformersList').innerHTML=filteredData.topPerformers.map((agent,idx)=>{const colors=['text-yellow-500','text-gray-400','text-amber-600'];return`<div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"><div class="flex items-center gap-3 mb-3"><svg class="w-6 h-6 ${colors[idx]||'text-gray-300'}" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg><div class="flex-1"><p class="font-semibold text-gray-900">${agent.nome}</p><p class="text-xs text-gray-500">${agent.leads} leads • ${agent.conversionRate}% conversão</p></div></div><div class="grid grid-cols-2 gap-2 text-xs"><div class="flex items-center gap-1"><svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><span>${agent.bitrix} BITRIX</span></div><div class="flex items-center gap-1"><svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg><span>${agent.visitas} Visitas</span></div></div></div>`}).join('')||'<p class="text-sm text-gray-500 text-center py-8">Nenhum dado disponível</p>'}
        filterData('today');
    </script>
</body>
</html>